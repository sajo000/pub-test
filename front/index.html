<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Index</title>

  <!-- jQuery -->
  <script src="https://code.jquery.com/jquery-3.7.1.min.js"
          integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo="
          crossorigin="anonymous"></script>

  <!-- CSS -->
  <link rel="stylesheet" href="./node_modules/bootstrap/dist/css/bootstrap.min.css">
  <link rel="stylesheet" href="./node_modules/bootstrap-icons/font/bootstrap-icons.min.css">
  <script type="text/javascript" src="./node_modules/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
  <script type="text/javascript" src="./node_modules/axios/dist/axios.min.js"></script>

  <link rel="stylesheet" href="css/app.css">

  <script type="text/javascript" src="./layout.js"></script>
  <script type="text/javascript" src="./function.js"></script>


  <!-- handsontable -->
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/handsontable/dist/handsontable.full.min.js"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/handsontable/styles/handsontable.min.css"/>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/handsontable/styles/ht-theme-main.min.css"/>

</head>
<body>
<div class="container-wrap">
  <div class="header-wrap">
    <header class="">
      <button class="menu">ì—´ê¸°</button>
      header
    </header>
  </div>

  <div class="content-container-wrap">
    <nav class="nav nav-wrap flex-column bg-light p-3">
      <ul class="nav flex-column w-100">
        <li class="nav-item">
          <a href="#" class="nav-link menu-item" data-url="./page1.html">
            <i class="bi bi-house-heart-fill"></i>
            <span>ëŒ€ì‹œë³´ë“œ</span>
            <i class="bi bi-chevron-down"></i>
          </a>
        </li>
        <li class="nav-item">
          <a href="#" class="nav-link menu-item" data-url="./page2.html">
            <i class="bi bi-box-seam"></i>
            <span>ìƒí’ˆ ê´€ë¦¬</span>
            <i class="bi bi-chevron-down"></i>
          </a>
        </li>
        <li class="nav-item">
          <a href="#" class="nav-link menu-item" data-url="./page3.html">
            <i class="bi bi-clipboard"></i>
            <span>ì£¼ë¬¸ ë‚´ì—­</span>
            <i class="bi bi-chevron-down"></i>
          </a>
        </li>
      </ul>
    </nav>

    <div class="content-container">
      <div>
        <ul class="nav nav-tabs"></ul>
      </div>
      <div class="iframe-content">
<!--        í˜ì´ì§€ ë¶ˆëŸ¬ì˜¤ëŠ” ì˜ì—­-->
      </div>

      <div>
        ì»¨í…ì¸  ì˜ì—­
        <table class="table table-striped table-hover">
          <colgroup>
            <col width="110px">
            <col width="200px">
            <col width="110px">
            <col width="auto">
            <col width="110px">
            <col width="auto">
            <col width="110px">
            <col width="auto">
            <col width="110px">
            <col width="auto">
          </colgroup>
          <tr>
            <th>íƒ€ì´í‹€1</th>
            <td><input type="text"></td>
            <th>íƒ€ì´í‹€2</th>
            <td><input type="text"></td>
            <th>íƒ€ì´í‹€3</th>
            <td><input type="text"></td>
            <th>íƒ€ì´í‹€4</th>
            <td><input type="text"></td>
            <th>íƒ€ì´í‹€5</th>
            <td><input type="text"></td>
          </tr>
        </table>

        <hr>

        <p>í…Œì´ë¸” ë“œë˜ê·¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ : https://handsontable.com/docs/javascript-data-grid/demo/</p>
        <div id="example"></div>
      </div>

    </div>
  </div>
</div>

</body>
<script>
  // ì‚¬ì´ë“œë©”ë‰´ì—ì„œ íƒ­ í´ë¦­í–ˆì„ë•Œ íƒ­ ìŒ“ì´ë©´ì„œ iframe í™”ë©´ ì „í™˜
  // $(function () {
  //   $('.menu-item').on('click', function (e) {
  //     e.preventDefault();
  //
  //     const menuName = $(this).text().trim();
  //     const menuUrl = $(this).data('url');
  //     const tabId = 'tab-' + menuName.replace(/\s+/g, '-').toLowerCase();
  //
  //     // âœ… ì´ë¯¸ íƒ­ì´ ì¡´ì¬í•˜ë©´ ì¤‘ë³µ ì¶”ê°€ ì—†ì´ ê·¸ëƒ¥ í™œì„±í™”
  //     const $existingTab = $('#' + tabId);
  //     if ($existingTab.length) {
  //       $('.nav-tabs .nav-link').removeClass('active');
  //       $existingTab.addClass('active');
  //       updateIframe($existingTab.data('url'));
  //       return;
  //     }
  //
  //     // âœ… ìƒˆ íƒ­ li ìƒì„± (+ id ë¶€ì—¬!)
  //     const $newTab = $(`
  //     <li class="nav-item">
  //       <a class="nav-link active d-flex align-items-center" id="${tabId}" href="#" data-url="${menuUrl}">
  //         ${menuName}
  //         <button type="button" class="btn-close ms-2" aria-label="Close"></button>
  //       </a>
  //     </li>
  //   `);
  //
  //     // ê¸°ì¡´ íƒ­ active ì œê±°
  //     $('.nav-tabs .nav-link').removeClass('active');
  //
  //     // íƒ­ì— ì¶”ê°€
  //     $('.nav-tabs').append($newTab);
  //
  //     // iframe ë³€ê²½
  //     updateIframe(menuUrl);
  //
  //     // íƒ­ í´ë¦­ ì´ë²¤íŠ¸ (ì§ì ‘ ìƒì„±í•˜ë‹ˆê¹Œ ì—¬ê¸° ë“±ë¡!)
  //     $newTab.find('.nav-link').on('click', function (e) {
  //       e.preventDefault();
  //
  //       $('.nav-tabs .nav-link').removeClass('active');
  //       $(this).addClass('active');
  //       updateIframe($(this).data('url'));
  //     });
  //
  //     // âŒ íƒ­ ë‹«ê¸° ì²˜ë¦¬
  //     $newTab.find('.btn-close').on('click', function (e) {
  //       e.stopPropagation();
  //
  //       const $tab = $(this).closest('.nav-link');
  //       const wasActive = $tab.hasClass('active');
  //       const $li = $(this).closest('li');
  //
  //       $li.remove();
  //
  //       if (wasActive) {
  //         const $first = $('.nav-tabs .nav-link').first();
  //         if ($first.length) {
  //           $first.addClass('active');
  //           updateIframe($first.data('url'));
  //         } else {
  //           $('.iframe-content').empty();
  //         }
  //       }
  //     });
  //   });
  //
  //   // ì´ˆê¸° íƒ­ í´ë¦­ ì´ë²¤íŠ¸
  //   $('.nav-tabs .nav-link').on('click', function (e) {
  //     e.preventDefault();
  //
  //     $('.nav-tabs .nav-link').removeClass('active');
  //     $(this).addClass('active');
  //     updateIframe($(this).data('url'));
  //   });
  //
  //   function updateIframe(url) {
  //     if (!url || url === 'undefined') {
  //       $('.iframe-content').html('<div class="p-3 text-muted">í™”ë©´ì„ ì„ íƒí•´ì£¼ì„¸ìš”</div>');
  //       return;
  //     }
  //     $('.iframe-content').html(`<iframe src="${url}" width="100%" height="600" frameborder="0"></iframe>`);
  //   }
  //
  //   // ì´ˆê¸° iframe ì„¸íŒ… (ëŒ€ì‹œë³´ë“œ)
  //   updateIframe($('.menu-item').first().data('url'));
  // });


  $(function () {
    $('.menu-item').on('click', function (e) {
      e.preventDefault();

      const menuName = $(this).text().trim();
      const menuUrl = $(this).data('url');
      const tabId = 'tab-' + menuName.replace(/\s+/g, '-').toLowerCase();

      const $existingTab = $('#' + tabId);
      if ($existingTab.length) {
        $('.nav-tabs .nav-link').removeClass('active');
        $existingTab.addClass('active');
        loadContent($existingTab.data('url')); // ğŸ‘ˆ ë°”ë€ ë¶€ë¶„!
        return;
      }

      const $newTab = $(`
      <li class="nav-item">
        <a class="nav-link active d-flex align-items-center" id="${tabId}" href="#" data-url="${menuUrl}">
          ${menuName}
          <button type="button" class="btn-close ms-2" aria-label="Close"></button>
        </a>
      </li>
    `);

      $('.nav-tabs .nav-link').removeClass('active');
      $('.nav-tabs').append($newTab);

      loadContent(menuUrl); // ğŸ‘ˆ ë°”ë€ ë¶€ë¶„!

      $newTab.find('.nav-link').on('click', function (e) {
        e.preventDefault();
        $('.nav-tabs .nav-link').removeClass('active');
        $(this).addClass('active');
        loadContent($(this).data('url')); // ğŸ‘ˆ ë°”ë€ ë¶€ë¶„!
      });

      $newTab.find('.btn-close').on('click', function (e) {
        e.stopPropagation();
        const $tab = $(this).closest('.nav-link');
        const wasActive = $tab.hasClass('active');
        const $li = $(this).closest('li');
        $li.remove();

        if (wasActive) {
          const $first = $('.nav-tabs .nav-link').first();
          if ($first.length) {
            $first.addClass('active');
            loadContent($first.data('url')); // ğŸ‘ˆ ë°”ë€ ë¶€ë¶„!
          } else {
            $('.iframe-content').html('<div class="p-3 text-muted">í™”ë©´ì„ ì„ íƒí•´ì£¼ì„¸ìš”</div>');
          }
        }
      });
    });

    $('.nav-tabs .nav-link').on('click', function (e) {
      e.preventDefault();
      $('.nav-tabs .nav-link').removeClass('active');
      $(this).addClass('active');
      loadContent($(this).data('url')); // ğŸ‘ˆ ë°”ë€ ë¶€ë¶„!
    });

    // âœ… HTMLì„ Ajaxë¡œ ë¡œë”©í•˜ëŠ” í•¨ìˆ˜
    function loadContent(url) {
      if (!url || url === 'undefined') {
        $('.iframe-content').html('<div class="p-3 text-muted">í™”ë©´ì„ ì„ íƒí•´ì£¼ì„¸ìš”</div>');
        return;
      }

      $.get(url)
      .done(function (html) {
        $('.iframe-content').html(html);
      })
      .fail(function () {
        $('.iframe-content').html('<div class="p-3 text-danger">í™”ë©´ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ë° ì‹¤íŒ¨í–ˆì–´ ğŸ˜¢</div>');
      });
    }

    // âœ… ì´ˆê¸° í™”ë©´ ë¡œë”©
    loadContent($('.menu-item').first().data('url'));
  });



  $(document).ready(function () {
    $('.menu').on('click', function () {
      $('.container-wrap').toggleClass('toggle-opened');
      $('.nav-wrap').toggleClass('opened');
    });

    // Handsontable ì»¨í…Œì´ë„ˆ ì§€ì •
    const container = document.querySelector('#example');

    const hot = new Handsontable(container, {
      themeName: 'ht-theme-main-dark-auto',
      data: [
        ['', 'Tesla', 'Volvo', 'Toyota', 'Ford'],
        ['2019', 10, 11, 12, 13],
        ['2020', 20, 11, 14, 13],
        ['2021', 30, 15, 12, 13]
      ],
      rowHeaders: true,
      // colHeaders: true, // A, B, C, Dì²˜ëŸ¼ ìë™ìœ¼ë¡œ ì•ŒíŒŒë²³ì´ íƒ€ì´í‹€ì´ë¡œ ë¶™ìŒ
      colHeaders: ['íƒ€ì´í‹€1', 'íƒ€ì´í‹€2', 'íƒ€ì´í‹€3', 'íƒ€ì´í‹€4', 'íƒ€ì´í‹€5'], // ë°°ì—´ì´ íƒ€ì´í‹€ë¡œ ë‚˜ì˜´
      height: 'auto',
      autoWrapRow: true,
      autoWrapCol: true,
      licenseKey: 'non-commercial-and-evaluation',
      manualColumnMove: true,   // ì—´(ì„¸ë¡œ) ë“œë˜ê·¸ ì´ë™
      manualColumnResize: true, // ì—´(ì„¸ë¡œ) í¬ê¸° ì¡°ì ˆ
      manualColumnFreeze: true, // ì‚¬ìš©ì ì—´ ê³ ì •/í•´ì œ ê°€ëŠ¥
      contextMenu: true,        // ìš°í´ë¦­ ë©”ë‰´ í™œì„±í™”
    });
  });
</script>
</html>